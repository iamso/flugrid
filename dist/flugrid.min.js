/*!
 * flugrid - version 0.1.4
 *
 * Made with ‚ù§ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2018 Steve Ottoz
 */
(function(c,d){if('function'==typeof define&&define.amd)define(['module','exports'],d);else if('undefined'!=typeof exports)d(module,exports);else{var e={exports:{}};d(e,e.exports),c.Flugrid=e.exports}})(this,function(c,d){'use strict';function e(h,j){if(!(h instanceof j))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(d,'__esModule',{value:!0});var f=function(){function h(j,k){for(var l=0;l<k.length;l++){var m=k[l];m.enumerable=m.enumerable,m.configurable=!0,'value'in m&&(m.writable=!0),Object.defineProperty(j,m.key,m)}}return function(j,k,l){return k&&h(j.prototype,k),l&&h(j,l),j}}(),g=function(){function h(){var j=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],k=j.container,l=void 0===k?'.flugrid':k,m=j.items,n=void 0===m?'.flugrid-item':m,o=j.gutter,p=void 0===o?0:o,q=j.auto,r=void 0!==q&&q,s=j.rtl,t=void 0!==s&&s;e(this,h),this.set({container:l,items:n,gutter:p,rtl:t}),this.auto=!!r,this.init()}return f(h,[{key:'init',value:function(){this.auto&&(this.build(),this.resizeHandler=this.build.bind(this),window.addEventListener('resize',this.resizeHandler))}},{key:'set',value:function(){var k=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],l=k.container,m=void 0===l?this.container:l,n=k.items,o=void 0===n?this.items:n,p=k.gutter,q=void 0===p?this.gutter:p,r=k.rtl,s=void 0===r?this.rtl:r;this.container=m instanceof Node?m:document.querySelector(m),this.items=this.container?[].slice.call(o instanceof NodeList?o:this.container.querySelectorAll(o),0):[],this.gutter=isFinite(parseInt(q))?parseInt(q):0,this.rtl=!!s}},{key:'build',value:function(){var k=this;return new Promise(function(l,m){if(k.container&&k.items.length){k.container.style.width='';var n=k.container.getBoundingClientRect().width,o=k.items[0].getBoundingClientRect().width+k.gutter,p=Math.max(Math.floor((n-k.gutter)/Math.floor(o)),1),q=[],r=[];k.container.style.width=o*p+k.gutter+'px';;k.container.style.position='relative';for(var s=0;s<p;s++)r.push(s*o+k.gutter),q.push(k.gutter);k.rtl&&r.reverse();var t=!0,u=!1,v=void 0;try{for(var x,w=k.items[Symbol.iterator]();!(t=(x=w.next()).done);t=!0){var y=x.value,z=q.slice(0).sort(function(D,E){return D-E}).shift();z=q.indexOf(z);var A=parseInt(r[z]),B=parseInt(q[z]);y.style.position='absolute',y.style.webkitBackfaceVisibility=y.style.backfaceVisibility='hidden',y.style.transformStyle='preserve-3d',y.style.transform='translate3D('+A+'px, '+B+'px, 0)',q[z]+=y.getBoundingClientRect().height+k.gutter}}catch(D){u=!0,v=D}finally{try{!t&&w.return&&w.return()}finally{if(u)throw v}}var C=q.slice(0).sort(function(D,E){return D-E}).pop();k.container.style.height=C+'px'}l(k)})}},{key:'reset',value:function(){this.container.style.position='',this.container.style.width='',this.container.style.height='';var k=!0,l=!1,m=void 0;try{for(var o,n=this.items[Symbol.iterator]();!(k=(o=n.next()).done);k=!0){var p=o.value;p.style.position='',p.style.webkitBackfaceVisibility=p.style.backfaceVisibility='',p.style.transformStyle='',p.style.transform=''}}catch(q){l=!0,m=q}finally{try{!k&&n.return&&n.return()}finally{if(l)throw m}}}},{key:'destroy',value:function(){this.reset(),this.auto&&window.removeEventListener('resize',this.resizeHandler)}}]),h}();d.default=g,c.exports=d['default']});